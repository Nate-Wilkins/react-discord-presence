import { Meta, Description, Story } from '@storybook/addon-docs';
import { createLanyardApiData } from '../../../test/create_lanyard_api_data';
import ImageBanner from '../../../test/banner.jpeg';
import ImageAvatar from '../../../test/avatar.gif';
import { ThemeDiscordPresence } from './ThemeDiscordPresence';
import { DiscordPresence } from './DiscordPresence';
import {
  DiscordPresenceClassesDefault,
  DiscordPresenceClassesCode,
} from '../style';

<Meta title="Display/DiscordPresence" component={DiscordPresence} argTypes={{ }} />

export const data = {
  ...createLanyardApiData({ developerId: '732' }),
  aboutMe: `Software Engineer.  Skier/Snowboarder. Photographer. Gamer.
NY ðŸŒ† CA ðŸŒ
PGP: F0EC3EA278223282B26CA4C1AAA34B2FC4B660C6`,
  memberSince: new Date('10/19/2022'),
  premiumMemberSince: new Date('2/2/2023'),
};

export const Template = (args) => (
  <div style={{ fontSize: '16px' }}>
    <ThemeDiscordPresence
      classes={args.classes}
      theme={args.theme}
    >
      <DiscordPresence
        data={args.data}
        formatBannerImageSrc={args.formatBannerImageSrc}
        formatAvatarImageSrc={args.formatAvatarImageSrc}
        formatBadgeImageSrc={args.formatBadgeImageSrc}
      />
    </ThemeDiscordPresence>
  </div>
)

# DiscordPresence

Display Discord presence.

<Story
  name="Default"
  parameters={{ date: new Date(1676846184000) }}
  args={{
    classes: DiscordPresenceClassesDefault,
    data: data,
    theme: { primary: '#2672c3', accent: '#001a30' },
    formatBannerImageSrc: () => ImageBanner,
    formatAvatarImageSrc: () => ImageAvatar,
    formatBadgeImageSrc: null
  }}
>
  {Template.bind({})}
</Story>

## Customization

Display Discord presence with custom styling.

- `DiscordPresenceCode.module.css`

<Story
  name="CustomCode"
  parameters={{ date: new Date(1676846184000) }}
  args={{
    classes: Object.assign(
      {},
      DiscordPresenceClassesDefault,
      DiscordPresenceClassesCode,
    ),
    data: data,
    theme: { primary: '#2672c3', accent: '#001a30' },
    formatBannerImageSrc: () => ImageBanner,
    formatAvatarImageSrc: () => ImageAvatar,
    formatBadgeImageSrc: null
  }}>
  {Template.bind({})}
</Story>

## Errors

This is what the component looks like when images can't be loaded.

<Story
  name="Errors"
  parameters={{ date: new Date(1676846184000) }}
  args={{
    classes: DiscordPresenceClassesDefault,
    theme: { primary: '#2672c3', accent: '#001a30' },
    data: {
      ...data,
      spotify: {
        ...data.spotify,
        album_art_url: 'https://i.scdn.co/image/non_existant',
      },
      discord_user: {
        ...data.discord_user,
        avatar: 'NonExistant_XXXXXXXXXXXXXXXXXXXX',
      },
      activities: [
        {
          type: 4,
          state: 'ðŸ˜¼',
          name: 'Custom Status',
          id: 'custom',
          emoji: {
            id: 'NONExistant_XXXXXX',
            name: 'eyesshaking',
            id: 'NonExistant_XXXXX',
            animated: true,
          },
          created_at: 1675542370754,
        },
        {
          type: 2,
          timestamps: {
            start: 1676232497145,
            end: 1676232687101,
          },
          sync_id: '77wq6jYIE2g0VcMjRfHdY0',
          state: 'Caravan Palace',
          session_id: '04c61c1e05762235cd7162630e7d7f1a',
          party: {
            id: 'spotify:194976024457510912',
          },
          name: 'Spotify',
          id: 'spotify:1',
          flags: 48,
          details: 'Black Betty',
          created_at: 1676232497723,
          assets: {
            large_text: 'Black Betty - Single',
            large_image: 'spotify:non_existantXXXXXXXd0000b2733f6f0a8864b04cf0486d92b7',
          },
        },
        {
          type: 0,
          timestamps: {
            start: 1675547220000,
          },
          state: 'Editing DiscordPresence.test.tsx',
          name: 'Neovim',
          id: 'adcc4377e4f48e4d',
          details: 'Working on react-discord-presence',
          created_at: 1675547708661,
          assets: {
            small_text: 'React',
            small_image: 'NonExistant_XXXXXXXXXX',
            large_text: 'Neovide',
            large_image: 'NonExistant_XXXXXXXXXX',
          },
          application_id: 'NonExistant_XXXXXXXXXX',
        },
        {
          type: 0,
          timestamps: {
            start: 1675651894032,
          },
          name: 'Overwatch 2',
          id: 'non_existant_XXXXXXXXXXX',
          created_at: 1675651894051,
          application_id: 'NonExistant_XXXXXXXXXX',
        },
      ],
      active_on_discord_web: false,
      active_on_discord_mobile: false,
      active_on_discord_desktop: true,
    },
    formatBannerImageSrc: () => "./non_existant_path",
    formatAvatarImageSrc: () => "./non_existant_path",
    formatBadgeImageSrc: () => "./non_existant_path"
  }}>
  {Template.bind({})}
</Story>
