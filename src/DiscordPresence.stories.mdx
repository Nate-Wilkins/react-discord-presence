import { Meta, Description, Story } from '@storybook/addon-docs';
import ImageAvatar from '../test/avatar.gif';
import ImageBanner from '../test/banner.jpeg';
import { MockDiscordPresence } from './MockDiscordPresence';
import StyleDiscordPresenceDefault from './display/style/DiscordPresenceDefault.module.css';

<Meta title="DiscordPresence" component={MockDiscordPresence}
  argTypes={{
    state: {
      // NOTE: When updating 'DiscordPresence' storybook controls for 'state' from 'error'
      //       it won't update in a development build because 'ErrorBoundary' won't swallow the error.
      defaultValue: 'actual',
      options: ['actual', 'happy', 'error', 'load'],
      control: { type: 'radio' }
    },
    developerId: {
      defaultValue: "194976024457510912",
      control: { type: 'text' },
    }
  }}
/>

export const Template = (args) => (
  <div style={{ fontSize: '16px' }}>
    <MockDiscordPresence
      args={{ developerId: args.developerId }}
      classes={StyleDiscordPresenceDefault}
      formatBannerImageSrc={() => ImageBanner}
      formatAvatarImageSrc={() => ImageAvatar}
      {...args }
    />
  </div>
);

# DiscordPresence

Self contained Discord presence which handles:
- Loading Discord data along with displaying a loading indicator.
- Errors that occur during loading along with displaying an error indicator.
- Caching Discord presence data.
- Displaying Discord presence data.

<Story name="DiscordPresence" args={{
  data: {
    memberSince: 'June 21, 2016',
  }
}}>
  {Template.bind({})}
</Story>

## Examples

Some example Discord user presences.

<Story name="Examples_Proximitynow" args={{
  args: {
    developerId: "445035187370328066"
  },
  data: {
    memberSince: 'May 12, 2018',
  }
}}>
  {Template.bind({})}
</Story>

<Story name="Examples_Rajat" args={{
  args: {
    developerId: "754033245972201612"
  },
  data: {
    memberSince: 'Sep 11, 2020',
  }
}}>
  {Template.bind({})}
</Story>
